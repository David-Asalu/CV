<?php
include("included.php")

    
?> 

<!DOCTYPE html>
<html>
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  <script src  ="jquery/jquery-3.6.0.min.js">

  </script>
    </head>
        <body>
   <?php
  
if ($_POST["name"] != "" && $_POST["message"] != "" && $_POST["email"] != ""){
  
$emailTo = "davidasalu125@gmail.com";
$subject = "Hi David";
$body = $_POST["message"];
$headers = "From:".$_POST["name"];
if (mail($emailTo, $subject, $body,"$headers")){
    ;
    echo "    <div class=\"alert alert-success\" role=\"alert\" id =\"alert-success\">
Email sent 
</div>";

} else{
 echo "mail didn't go th";
};
}


   ?>
        <div class="alert alert-danger" role="alert" id = "alert" >
    <span id = "empty-message-alert"> The following errors were found: <br><br> Message field is empty </span> <br>  <span id = "empty-name-alert"> Name field is empty</span> 
    <br>
    <span id = "invalid-email-address">
      
    </span>
  </div>
             
         
     
     <form method = "post" action="#"  id = "myform" >
     
      <div class="mb-3">
        <label for="exampleInputEmail1" class="form-label">Email address</label>
        <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name = "email">
        <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div>
      </div> 
      
      <div class="mb-3"> 
        <label class="form-check-label" for="exampleInputName1">Subject</label>
        <input type="name" class="form-control" id="exampleInputName1" placeholder="Enter name" name = "name">
      
      </div>
      <div class="mb-3">
        <label for="message" class="form-label">Message</label>
        <textarea class="form-control" input type="message" rows="3" placeholder="Enter message" id = "message" name = "message"></textarea>
      </div>
      </div>
  <button type="submit" class="btn btn-primary" id = "submitButton">Submit</button>
    </form> 
    <a href = "Donut.html" >                 click this link to another page              </a>
            
               <p>hi</p>
           <script type="text/javascript">
              $("#empty-message-alert").hide()
              $("#empty-name-alert").hide();
              $("#alert").hide()
                
             
             $("#submitButton").click( function myfunc(){    
                 
                 function isEmail(email) {
  var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
  return regex.test(email);
  
}
myFunction = function(e) {
    e.preventDefault();
    
}
if      (isEmail($("#exampleInputEmail1").val()) == false){

     
        $("#invalid-email-address").text("Invalid email address")
        
        
        $("#alert").show()  
        
     
   
} else{
        $("#invalid-email-address").hide();
        
        }


            
            
               if ($("#message").val() == "" || $("#exampleInputName1").val() == "" || isEmail($("#exampleInputEmail1").val()) == false ) {
                
                                  $("#empty-message-alert").show()
                                  
                                  $("#alert").show()
                                  
                                  $("form").one('submit',function(e){
                                          
                                  e.preventDefault() ; 
                                  $("#alert-success").hide()
                                 
    } )}     

                
                else  {   $("form").submit();
              
                         $("#empty-message-alert").hide()
                         
               }
               if ($("#exampleInputName1").val() == "" ) {
              
              
                   $("#empty-name-alert").show()
              
                   $("#alert").show()
                   
                  
             
                    } else{
                    
                       $("#empty-name-alert").hide()
                       
                         } 
               if ($("#message").val() !="" && $("#exampleInputName1").val() != "" && 
               isEmail($("#exampleInputEmail1").val()) == true
               ){
                $("#alert").hide() 
              
               }}
               
               
               
   )
           
   


           </script>
        </body>
    
</html>    